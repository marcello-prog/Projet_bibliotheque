CREATE TABLE livres (
    id INT GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
    titre VARCHAR(100) NOT NULL,
    auteur VARCHAR(100) NOT NULL,
    categorie VARCHAR(50),
    nombreExemplaires INT NOT NULL
);

CREATE TABLE membres (
    id INT GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
    nom VARCHAR(50) NOT NULL,
    prenom VARCHAR(50) NOT NULL,
    email VARCHAR(100),
    adhesionDate DATE
);

CREATE TABLE emprunts (
    idEmprunt INT GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
    membreId INT NOT NULL,
    livreId INT NOT NULL,
    dateEmprunt DATE,
    dateRetourPrevue DATE,
    dateRetourEffective DATE,

    CONSTRAINT fk_membre
        FOREIGN KEY (membreId)
        REFERENCES membres(id)
        ON DELETE CASCADE,

    CONSTRAINT fk_livre
        FOREIGN KEY (livreId)
        REFERENCES livres(id)
        ON DELETE CASCADE
);
